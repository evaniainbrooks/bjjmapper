- title = "#{directory_segment.full_name} Brazilian Jiu-Jitsu"
= content_for :title do
  = title
.container.page.directory
  .row
    .col-md-12
      %h1
        = directory_segment.full_name
        %small BJJ academies and events
  .row.hidden-xs
    .col-md-10
      = render partial: 'breadcrumb'
    .col-md-2.text-right.pull-right
      = render partial: 'create_location_button'
  .row
    .col-md-10
      = render partial: 'maps/map', locals: { height: 250, show_create: false }
    .col-md-2
      = render partial: 'maps/filter_list'
  .row
    .col-md-3
      - if directory_segment.child_segments.present?
        %h3 Other Cities in #{directory_segment.full_name}
        %ul.list-unstyled.list-inline
          - directory_segment.child_segments.sort.each do |city|
            %li= link_to city.name, directory_segment_path(country: directory_segment.name, city: city.name), title: "List of Brazilian Jiu-Jitsu gyms in #{directory_segment.full_name}" 

= content_for(:scripts) do
  = javascript_include_tag 'map'
  :coffeescript
    $(document).ready ->
      segmentModel = new RollFindr.Models.DirectorySegment(#{render_json(directory_segment)})
      mapModel = new RollFindr.Models.Map(#{render_json(map)})
      cityView = new RollFindr.Views.DirectorySegmentCountryView({ model: segmentModel, mapModel: mapModel, el: $('.directory') })

