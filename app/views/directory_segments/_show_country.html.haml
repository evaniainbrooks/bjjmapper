- title = "Brazilian Jiu-Jitsu Academies in #{directory_segment.full_name}"
= content_for :title do
  = title
.container.page.directory
  .row
    .col-md-12
      %h1
        = directory_segment.full_name
        %small BJJ academies and events
  .row
    .col-md-10
      = render partial: 'breadcrumb'
    .col-md-2.text-right.pull-right
      = render partial: 'create_location_button'
  .row
    .col-md-9.map-view
      .map-canvas{:style => 'height: 400px;'}
      .map-list-view
        .location-list
          .loading-overlay
            %span.fa.fa-refresh.fa-3x.fa-spin
          = render partial: 'locations/map_list', locals: { show_create: true }
    .col-md-3
      - if directory_segment.child_segments.present?
        %h3 Other Cities in #{directory_segment.full_name}
        %ul.list-unstyled
          - directory_segment.child_segments.sort.each do |city|
            %li= link_to city.name, directory_segment_path(country: directory_segment.name, city: city.name), title: "List of Brazilian Jiu-Jitsu gyms in #{directory_segment.full_name}" 

= content_for(:scripts) do
  :coffeescript
    $(document).ready ->
      segmentModel = new RollFindr.Models.DirectorySegment(#{render_json(directory_segment)})
      mapModel = new RollFindr.Models.Map(#{render_json(map)})
      cityView = new RollFindr.Views.DirectorySegmentCountryView({ model: segmentModel, mapModel: mapModel, el: $('.directory') })

