.col-md-2.col-xs-6.col-sm-3.text-center.hidden-xs
  %b.small.text-muted.upcase Location
  %a{:name => 'location'}
  %address.display-field.text-info
    - if moved?
      %strong.text.text-danger
        This academy has moved to
        = link_to location.moved_to_location.address, location_path(location.moved_to_location, ref: 'loc_changed_address')
      %br/
      %br/
    = link_to map_path(:lat => location.lat, :lng => location.lng, :ref => 'loc_map_full'), :data => { :'no-turbolink' => true } do
      .text-uppercase.small
        %span.address
          %span.fa.fa-map-marker
          = location.street
          %br/
          = "#{location.city}, #{location.state}"
          %br/
          = "#{location.postal_code} #{location.country}"
          %br/
        %span.small
          = surround '(', ')' do
            %span.fa.fa-search-plus
            View on larger map
  %p.display-field.directions
    = location.directions

  %p.display-field.small.text-muted
    Is this your academy? 
    %a{:href => 'javascript:void(0)', :'data-claim-location' => true}
      Click here to claim it
  - if local_assigns[:f]
    .form-group.edit-field
      = f.label :street, class: 'small text-muted upcase'
      = f.text_field :street, class: 'form-control input-sm'
      = f.label :city, class: 'small text-muted upcase'
      = f.text_field :city, class: 'form-control input-sm'
      = f.label :state, class: 'small text-muted upcase'
      = f.text_field :state, class: 'form-control input-sm'
      = f.label :country, class: 'small text-muted upcase'
      = f.text_field :country, class: 'form-control input-sm'
      = f.label :postal_code, class: 'small text-muted upcase'
      = f.text_field :postal_code, class: 'form-control input-sm'
    .form-group.edit-field
      = f.label :directions, class: 'small text-muted upcase'
      = f.text_area :directions, placeholder: 'Provide any extra directions to the academy (eg. signage missing; go around the back)', class: 'form-control', rows: 3
  - if Role.power(current_user.role) >= Role.power(Role::MODERATOR)
    %b.small.text-muted.upcase Moderation
    %ul.list-unstyled
      %li= link_to 'Admin Panel', admin_location_path(location), class: 'small text-primary'
      %li= link_to 'Verify', verify_location_status_path(location), :class => 'small text-success', :'data-returnto' => moderate_admin_locations_path, :'data-remote' => true, :'data-method' => 'put', :'data-body' => 'Verify location'
      %li= link_to 'Reject', reject_location_status_path(location), :class => 'small text-danger', :'data-returnto' => moderate_admin_locations_path, :'data-remote' => true, :'data-method' => 'put', :'data-body' => 'Reject location'
      %li= link_to 'Pending', pending_location_status_path(location), :class => 'small text-warning', :'data-returnto' => moderate_admin_locations_path, :'data-remote' => true, :'data-method' => 'put', :'data-body' => 'Pending location'

= content_for(:scripts) do
  :coffeescript
    $('.directions').readmore(collapsedHeight: 175)
