.container.page.show-user
  = form_for(user, html: { class: 'form ' + edit_mode_classes }) do |f|
    = render partial: 'welcome_message' if welcome?
    .row
      .col-md-4
        %img.center-block.display-field{:alt => "#{user.name} profile image", :src => user.image}
        %div.edit-field.text-center
          %img.center-block{:alt => "#{user.name} profile image", :src => user.image}
          %button.image-caption.center-block.btn.btn-primary.btn-small{:type => 'button'} Upload Image
      .col-md-5
        = render partial: 'users/table', locals: { :f => f, :user => user }
      .col-md-3
        = render partial: 'users/subnav', locals: { :user => user }
    %hr/
    .row
      .col-md-8
        %h3 Biography
        .display-field= user.description
        .edit-field.form-group
          -#= f.label:description
          = f.text_area :description, rows: 10, class: 'form-control'
      .col-md-4
        %h3 Teaching at
        %ul.list-unstyled
          - user.locations.each_with_index do |location, i|
            %li= render partial: 'locations/card', object: location, as: 'location', locals: { location_counter: i }
    %hr/
    .row
      .col-md-12
        %h3 Students
        .row
          - user.lineal_children.each_with_index do |student, i|
            .col-md-4
              = render partial: 'users/card', object: student, as: 'user', locals: { user_counter: i }
    %hr.edit-field/
    .row.edit-field
      .col-md-12
        %h3 Edit Controls
      .col-md-12
        .form-group
          %b Created at 
          = user.created_at
        .form-group
          %b Last updated at 
          = user.updated_at
        .form-group
          %b Last updated by
          = user.modifier
      .col-md-12
        .pull-right
          %button.delete-field.btn.btn-danger.btn-md{:type => 'button',
            :data => { :method => :delete,
                       :url => user_path(user),
                       :title => 'Are you sure you want to delete this user?',
                       :body => "You are performing this action as <b>#{current_user.try(:name)}</b>. Press 'Confirm' to permanently delete this user. Note that this action cannot be un-done." } }
            %i.fa.fa-trash
            Delete User
          %button.btn.btn-default.btn-md{:type => 'button', 'data-cancel-edit' => true} Cancel Editing
          %button.btn.btn-primary.btn-md{:type => 'submit'} Save Changes
